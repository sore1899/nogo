<!DOCTYPE html>
<html>
    <head>
        <title>Home</title>
        <link rel="stylesheet" href="gamehome.css">
    </head>
    <body>
        <div class="page">
            <div class="top">
                <div class="top-left">
                    <h1><a href="../index.html">Home</a></h1>
                    <nav class="nav">
                        <a class="nav-item active" href="games.html">Games</a>
                        <a class="nav-item" href="youtube.html">YouTube</a>
                        <a class="nav-item" href="about me.html">About Me</a>
                    </nav>
                </div>
                <input id="search" class="search" type="search" placeholder="Search projects..." aria-label="Search projects">
            </div>
            <div class="projectsscroll">
                <div class="projects">
                    <div class="project">
                        <div class="imgfav">
                            <a href="../Cookie clicker/code/index.html"><img class="project-IMG" src="Cookie Toucher.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="sore1899.png">
                            <div>
                                <h2>Cookie Toucher</h2>
                                <p>Made by: soren</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../DS7.html"><img class="project-IMG" src="DS7.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="sore1899.png">
                            <div>
                                <h2>DS7</h2>
                                <p>Made by: soren</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../PHONE%20(73).html"><img class="project-IMG" src="Defendor.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="sore1899.png">
                            <div>
                                <h2>Defendor</h2>
                                <p>Made by: soren</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../guntest.html"><img class="project-IMG" src="Gun test.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="sore1899.png">
                            <div>
                                <h2>Gun Test</h2>
                                <p>Made by: soren</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../respawned.html"><img class="project-IMG" src="Respawned.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="sore1899.png">
                            <div>
                                <h2>Respawned</h2>
                                <p>Made by: soren</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../SHIFTERSV2.html"><img class="project-IMG" src="SHIFTERS V2.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="sore1899.png">
                            <div>
                                <h2>SHIFTERS V2</h2>
                                <p>Made by: soren</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../game.html"><img class="project-IMG" src="GAME.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="sore1899.png">
                            <div>
                                <h2>GAME</h2>
                                <p>Made by: soren</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../DG2.html"><img class="project-IMG" src="DG2.png"></a>
                            <button class="favorite">♡</button>
                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="prodforer.png">
                            <div>
                                <h2>Downgrade2</h2>
                                <p>Made by: prodforer</p>
                            </div>
                        </div>
                    </div>

                    <div class="project">
                        <div class="imgfav">
                            <a href="../Brawlio.html"><img class="project-IMG" src="brawlio.png"></a>
                            <button class="favorite">♡</button>

                        </div>

                        <div class="creator-info">
                            <img class="creator-img" src="coltroc.png">
                            <div>
                                <h2>Brawl.io</h2>
                                <p>Made by: coltroc</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const input = document.getElementById('search');
                    const projects = document.querySelectorAll('.projects .project');
                    const projectsContainer = document.querySelector('.projects');
                    function filter()
                    {
                        const q = input.value.trim().toLowerCase();

                        projects.forEach(p =>
                        {
                            const title = (p.querySelector('h2')?.textContent || '').toLowerCase();
                            const creatorText = (p.querySelector('p')?.textContent || '').toLowerCase();
                            const creator = creatorText.replace("made by:", "").trim();

                            p.style.display =
                                q === '' || title.includes(q) || creator.includes(q)
                                ? ''
                                : 'none';
                        });
                    }
                    input.addEventListener('input', filter);

                    // Persistence setup
                    const projectsArray = Array.from(projects);
                    function projectId(p) {
                        return (p.querySelector('h2')?.textContent || '').trim();
                    }
                    const favKey = 'gameFavorites';
                    let favorites = [];
                    try {
                        const raw = localStorage.getItem(favKey);
                        favorites = raw ? JSON.parse(raw) : [];
                    } catch (e) {
                        favorites = [];
                    }

                    // Apply saved favorites (preserve saved order)
                    favorites.slice().reverse().forEach(id => {
                        const p = projectsArray.find(pp => projectId(pp) === id);
                        if (p) {
                            p.classList.add('favorited');
                            const btn = p.querySelector('.favorite');
                            if (btn) btn.textContent = '♥';
                            projectsContainer.prepend(p);
                        }
                    });

                    // Favorite button behavior: toggle visual state, move project, and persist
                    const favButtons = document.querySelectorAll('.favorite');
                    favButtons.forEach(btn => {
                        btn.addEventListener('click', function (e) {
                            e.preventDefault();
                            const project = btn.closest('.project');
                            const id = projectId(project);
                            const isFav = project.classList.toggle('favorited');
                            btn.textContent = isFav ? '♥' : '♡';

                            // update favorites array
                            favorites = favorites.filter(x => x !== id);
                            if (isFav) {
                                favorites.unshift(id);
                                projectsContainer.prepend(project);
                            } else {
                                projectsContainer.appendChild(project);
                            }

                            try { localStorage.setItem(favKey, JSON.stringify(favorites)); } catch (e) {}
                        });
                    });

                    // apply current filter state
                    filter();
                });
            </script>
    </body>
</html>